<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        caption="msg://monitoringScreen.caption"
        messagesPack="com.company.medicalrecord.web.screens.monitoring"
        xmlns:chart="http://schemas.haulmont.com/charts/charts.xsd">
    <data>
        <collection id="weightMonitoringDc" class="com.company.medicalrecord.entity.monitoring.WeightMonitoring">
            <view extends="_local"/>
            <loader id="weightMonitoringDl">
                <query>
                    <![CDATA[select e from medicalrecord_WeightMonitoring e order by e.localDateTime]]>
                </query>
            </loader>
        </collection>
        <collection id="pulseMonitoringDc" class="com.company.medicalrecord.entity.monitoring.PulseMonitoring">
            <view extends="_local"/>
            <loader id="pulseMonitoringDl">
                <query>
                    <![CDATA[select e from medicalrecord_PulseMonitoring e order by e.localDateTime]]>
                </query>
            </loader>
        </collection>
        <collection id="temperatureMonitoringDc"
                    class="com.company.medicalrecord.entity.monitoring.TemperatureMonitoring">
            <view extends="_local"/>
            <loader id="temperatureMonitoringDl">
                <query>
                    <![CDATA[select e from medicalrecord_TemperatureMonitoring e order by e.localDateTime]]>
                </query>
            </loader>
        </collection>
    </data>
    <actions>
        <action id="addWeight"/>
        <action id="addTemperature"/>
        <action id="showAllWeight"/>
        <action id="showAllTemperature"/>
        <action id="addPulse"/>
        <action id="showAllPulse"/>
    </actions>
    <layout>
        <scrollBox id="monitoringVBox">
            <vbox id="vBoxWeightMonitoring" spacing="true"
                  width="100%">
                <label id="weightLabel" value="msg://labelWeight.value" stylename="bold h3"/>
                <hbox id="weightOptionsHBox" width="100%" margin="false,true,false,false">
                    <hbox id="weightPeriodHBox" spacing="true">
                        <lookupField id="weightPeriodLookupField" nullOptionVisible="false"/>
                        <dateField id="weightDateField"/>
                        <button id="showWeightByPeriodButton" caption="msg://showWeightByPeriodButton.caption"/>
                    </hbox>
                    <hbox id="weightEditorHBox" spacing="true" align="TOP_RIGHT">
                        <button id="addWeightButton" icon="ADD_TO_SET_ACTION" action="addWeight"/>
                        <button id="showAllWeightButton" icon="ALIGN_JUSTIFY" action="showAllWeight"/>
                    </hbox>
                </hbox>
                <chart:serialChart id="weightSerialChart"
                                   categoryField="localDateTime"
                                   dataDateFormat="YYYY-MM-DD"
                                   dataContainer="weightMonitoringDc"
                                   width="100%" box.expandRatio="1.0">
                    <chart:categoryAxis parseDates="true"/>
                    <chart:graphs>
                    <chart:graph valueField="value"
                                 lineColor="RED"
                                 bullet="TRIANGLE_DOWN"/>
                    </chart:graphs>
                    <chart:chartCursor cursorAlpha="1"
                                       cursorColor="#FF0000"
                                       cursorPosition="MOUSE"
                                       limitToGraph="g1"
                                       pan="true"
                    />
                </chart:serialChart>
            </vbox>
            <vbox id="temperatureHBox" width="100%" spacing="true">
                <label id="temperatureLabel" value="msg://temperatureLabel.value" stylename="bold h3"/>
                <hbox id="temperatureOptionsHBox" spacing="true" width="100%" margin="false,true,false,false">
                    <hbox id="temperaturePeriodHBox" spacing="true">
                        <lookupField id="temperatureDurationLookupField" nullOptionVisible="false"/>
                        <dateField id="temperatureDateField"/>
                        <button id="showTemperatureByPeriodButton" caption="msg://showTemperatureByPeriodButton.caption"/>
                    </hbox>
                    <hbox id="temperatureEditorHBox" align="TOP_RIGHT" spacing="true">
                        <button id="addTemperatureButton" icon="ADD_TO_SET_ACTION" action="addTemperature"/>
                        <button id="showAllTemperatureButton" icon="ALIGN_JUSTIFY" action="showAllTemperature"/>
                    </hbox>
                </hbox>
                <chart:serialChart id="temperatureSerialChart"
                                   categoryField="localDateTime"
                                   dataDateFormat="YYYY-MM-DD"
                                   dataContainer="temperatureMonitoringDc"
                                   width="100%" height="auto" box.expandRatio="1.0">
                    <chart:categoryAxis parseDates="true"/>
                    <chart:graphs>
                        <chart:graph valueField="value"
                                     lineColor="RED"
                                     bullet="TRIANGLE_DOWN"/>
                    </chart:graphs>
                    <chart:chartCursor cursorAlpha="1"
                                       cursorColor="#FF0000"
                                       cursorPosition="MOUSE"
                                       limitToGraph="g1"
                                       pan="true"
                    />
                </chart:serialChart>
            </vbox>
            <vbox id="pulseVBox" spacing="true" width="100%">
                <label id="pulseLabel" value="msg://pulseLabel.value" stylename="bold h3"/>
                <hbox id="pulseOptionsHBox" spacing="true" margin="false,true,false,false" width="100%">
                    <hbox id="pulsePeriodHBox" spacing="true">
                        <lookupField id="pulseDurationLookupField" nullOptionVisible="false"/>
                        <dateField id="pulseDateField"/>
                        <button id="showPulseByPeriodButton" caption="msg://showPulseByPeriodButton.caption"/>
                    </hbox>
                    <hbox id="pulseEditorHBox" spacing="true" align="TOP_RIGHT">
                        <button id="addPulseButton" icon="ADD_TO_SET_ACTION" action="addPulse"/>
                        <button id="showAllPulseButton" icon="ALIGN_JUSTIFY" action="showAllPulse"/>
                    </hbox>
                </hbox>
                <chart:serialChart id="pulseSerialChart"
                                   categoryField="localDateTime"
                                   dataDateFormat="YYYY-MM-DD"
                                   dataContainer="pulseMonitoringDc"
                                   width="100%" box.expandRatio="1.0">
                    <chart:categoryAxis parseDates="true"/>
                    <chart:graphs>
                        <chart:graph valueField="value"
                                     lineColor="RED"
                                     bullet="TRIANGLE_DOWN"/>
                    </chart:graphs>
                    <chart:chartCursor cursorAlpha="1"
                                       cursorColor="#FF0000"
                                       cursorPosition="MOUSE"
                                       limitToGraph="g1"
                                       pan="true"
                    />
                </chart:serialChart>
            </vbox>
        </scrollBox>
    </layout>
</window>